{% extends "base.html" %}
{% block title %}Profile â€” RE Marketplace{% endblock %}
{% block content %}

{% block styles %}
<style>
  .profile-form .form-control,
  .profile-form .form-select {
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    color: #333;
  }
  .profile-form .form-control:focus,
  .profile-form .form-select:focus {
    background-color: #ffffff;
    border-color: #777;
    box-shadow: none;
  }
</style>
{% endblock %}

<div class="row justify-content-center">
  <div class="col-md-8 col-lg-7">
    <div class="card">
      <div class="card-body profile-card">
        <h2 class="card-title mb-3">Profile</h2>

        <form method="POST" class="profile-form" novalidate>
          {{ form.hidden_tag() }}

          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.first_name.label(class="form-label") }}
                {{ form.first_name(class="form-control") }}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.surname.label(class="form-label") }}
                {{ form.surname(class="form-control") }}
              </div>
            </div>
          </div>

          <div class="mb-3">
            {{ form.phone.label(class="form-label") }}
            {{ form.phone(class="form-control") }}
          </div>

          <div class="mb-3">
            {{ form.company_name.label(class="form-label") }}
            {{ form.company_name(class="form-control") }}
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                {{ form.position_in_company.label(class="form-label") }}
                {{ form.position_in_company(class="form-control") }}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3" id="aum-field">
                {{ form.aum.label(class="form-label") }}
                {{ form.aum(class="form-control") }}
              </div>
            </div>
          </div>

          <div class="mb-3">
            {{ form.company_website.label(class="form-label") }}
            {{ form.company_website(class="form-control") }}
          </div>

          <div class="mb-3">
            {{ form.company_address.label(class="form-label") }}
            {{ form.company_address(class="form-control") }}
          </div>

    <div id="preferences-section">
          <hr>

          <h5 class="mb-3">Preferences</h5>

          <div class="mb-3" id="prefered-field">
            {{ form.preferred_asset_classes.label(class="form-label") }}
            {{ form.preferred_asset_classes(class="form-control", placeholder="e.g. Resi, Commercial, Industrial") }}
          </div>

          <div class="mb-3" id="type-field">
            {{ form.location_type_preference.label(class="form-label") }}
            {{ form.location_type_preference(class="form-control", placeholder="e.g. prime London or non-prime Germany") }}
          </div>

          <div class="mb-3" id="minirr-field">
            {{ form.target_min_irr.label(class="form-label") }}
            {{ form.target_min_irr(class="form-control", placeholder="e.g. 12") }}
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="mb-3" id="ticketmin-field">
                {{ form.ticket_min.label(class="form-label") }}
                {{ form.ticket_min(class="form-control", placeholder="Minimum ticket size") }}
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3" id="ticketmax-field">
                {{ form.ticket_max.label(class="form-label") }}
                {{ form.ticket_max(class="form-control", placeholder="Maximum ticket size") }}
              </div>
            </div>
          </div>

          <div class="form-check mb-3" id="email-field">
            {{ form.email_updates(class="form-check-input", id="email_updates") }}
            <label class="form-check-label" for="email_updates">
              {{ form.email_updates.label.text }}
            </label>
          </div>
    </div>
         

          <div class="d-grid">
            {{ form.submit(class="btn btn-primary") }}
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const userRole = "{{ current_user.role }}";

    const aumField = document.getElementById("aum-field");
    const preferencesSection = document.getElementById("preferences-section");

    if (userRole !== "investor") {
        aumField.style.display = "none";
        preferencesSection.style.display = "none";
    } else {
        aumField.style.display = "block";
        preferencesSection.style.display = "block";
    }
});
</script>

{% endblock %}
